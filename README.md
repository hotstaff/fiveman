# リアルタイム家計簿ファイブマン

リアルタイム家計簿ファイブマンは作者の急迫する家計を支えるために作成されたリアルタイムオンライン家計簿です。開発する際に目標としたのは、オンラインで同時に家計簿編集を想定されていることと、入力までのステップが少ないことです。個人的な利用を完全に想定されているため、普通の家計簿には存在してはいけない独自仕様が盛り込まれています。それらの例を上げます。

- 家計簿をオンラインで公開する

 この家計簿はオンラインで公開することを想定しています。

- セキュリティ保護をしない

 この家計簿はオンラインに公開されていること、誰でも編集ができることが想定されています。その代わり、変更された場合そのデータの変更がすぐにわかるようになっています。

- ログインはない

 誰が編集したかということを記録しません。

## お詫び

現在まで３年ほど個人的に利用をしていますが、あちこちバグだらけです。致命的なものもいくつかありますが、再ロードでどうにかなる場合は放置されている可能性があります。困ったらブラウザを再ロードしてみてください。

## インストール

    npm install

node_module以下に必要なパッケージがインストールされたあと、gulpによってpublic/以下に必要なパッケージからのソースコードがコピー・圧縮されます。この作業は時間がかかります。（２分程度）

## 起動テスト

    npm test

デーモンとしてではなく、コンソールでサーバーを起動します。CTRL-Cで終了できます。

## 接続テスト

ブラウザから<http://localhost:3002/public/>へアクセスしてください。初めの金額を送信すれば家計簿が始まります。この初めの最も古い日付の入力は表に表示されないようになっています。
家計簿の名前等を変更したい場合は直接/book/note.jsonを編集してください。サーバー起動中にも書き込みがなければロックしていませんので変更可能です。編集後ブラウザを再ロードしてください。

## 起動

    npm start

foreverを使ってデーモンとして起動します。

### Expressを使わない場合
    
上記の方法で起動すると静的コンテンツをnodeパッケージのexpressによりホスティングする設定になっています。apache等のソフトウェアからホスティングする場合は

    npm run start-without-express

にて起動してください。その場合はpublic/以下及びbook/を外部からアクセス出来るよう設定を行ってください。

## 停止

    npm stop

## Licenceについて

この家計簿本体はApache-2.0のライセンスのもとで公開します。
この家計簿はMIT, Apache-2.0及びCC BY-NC3.0のライセンスのもとで公開されているオープンソースのコードを含みます。それぞれのコードのライセンスの一覧についてはpublic/js/index.jsより確認できます。canvas.jsについては現在商用ライセンスで公開されていますが、この家計簿では古いCC BY-NC 3.0のものを利用しています。したがってこの家計簿を商用利用することはできません。

## 作者

Hideto Manjo
